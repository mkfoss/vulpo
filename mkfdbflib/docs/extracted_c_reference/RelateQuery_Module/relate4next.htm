<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<html>

<!--(==============================================================)-->
<!--(Document created with RoboEditor. )============================-->
<!--(==============================================================)-->

<head>

<title>relate4next</title>

<!--(Meta)==========================================================-->

<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Originator content=ImportDoc>
<meta name=OriginalFile content="C:\Documentation\C Reference Guide Word Docs\mem4.doc">
<meta name=generator content="RoboHELP by eHelp Corporation - www.ehelp.com">
<meta name=generator-major-version content=0.1>
<meta name=generator-minor-version content=1>
<meta name=filetype content=kadov>
<meta name=filetype-version content=1>
<meta name=page-count content=1>
<meta name=layout-height content=1574>
<meta name=layout-width content=677>


<!--(Links)=========================================================-->

<link rel="stylesheet" href="mem4.css">



</head>

<!--(Body)==========================================================-->


<body lang=EN-US>

<h2>relate4next</h2>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Usage:&nbsp;&nbsp;&nbsp; 
 </span></span>int relate4next( RELATE4 **relatePtrPtr )&nbsp;</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span 
 class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Description:&nbsp;&nbsp;&nbsp; 
 </span></span>This function can be used to iterate through all the relations 
 in the relation set. After <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">relate4next 
 </span></span>is<span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;"> 
 </span></span>called, it references the next relation in the tree.</p>

<p class=Body
	style="text-indent: 0px;"><span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">relate4next</span></span> 
 uses the Depth-First algorithm to move through the relation set. The following 
 diagram illustrates the order in which the relation data files are accessed.</p>

<p class=Body
	style="text-indent: 0in;"><img src="../Images/RelationOrder.gif" v:shapes="_x0000_i1036" x-maintain-ratio="TRUE" style="width: 303px;
											height: 337px;
											float: none;" width="303" height="337" border="0"></p>

<p class=Body
	style="margin-left: 0in; text-indent: 0in;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Parameters:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">*relatePtrPtr</span></span>&nbsp;&nbsp; 
 This is a pointer which points to the current <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">RELATE4</span></span> pointer 
 in the iteration. The *<i>relatePtrPtr</i> becomes null, when there are 
 no more relation data files to iterate through. In order to iterate through 
 the entire relation set the first *<i>relatePtrPtr</i> should point to 
 the top master <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">RELATE4</span></span> 
 structure returned by<span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;"> 
 relate4init</span></span>.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Returns:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4complete&nbsp;&nbsp;&nbsp; 
 </span></span>Done. There are no additional relations in the relation 
 set. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4down&nbsp;&nbsp;&nbsp; 
 </span></span>The new <b>*</b><i>relatePtrPtr</i> is one further down 
 in the relation set.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4same</span></span>&nbsp;&nbsp; 
 The new<b> *</b><i>relatePtrPtr</i> is the next slave of the same master.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">-X</span></span>&nbsp;&nbsp; 
 The new<b> *</b><i>relatePtrPtr</i> is 'X' masters up. For example, a 
 return of <b>(int)</b> -1 means that the master had no additional slaves 
 and the master's next slave is the new <b>*</b><i>relatePtrPtr</i>. </p>

<p class=SourceCode>/*ex126.c*/</p>

<p class=SourceCode>#include &quot;d4all.h&quot; </p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>void displayRelationTree( RELATE4 *relate ) </p>

<p class=SourceCode>{</p>

<p class=SourceCode>&nbsp;&nbsp; DATA4 *data ;</p>

<p class=SourceCode>&nbsp;&nbsp; int i, pos = 0 ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; for(; relate; )</p>

<p class=SourceCode>&nbsp;&nbsp; {</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf( &quot;\n&quot; 
 ) ;</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(i = pos; i 
 &gt; 0; i-- )</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 printf( &quot;&nbsp;&nbsp; &quot; ) ;</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data = relate4data( 
 relate ) ;</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf( &quot;%s&quot;, 
 d4fileName( data ) ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pos += relate4next( 
 &amp;relate ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; }</p>

<p class=SourceCode>}</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>void main( void ) </p>

<p class=SourceCode>{</p>

<p class=SourceCode>&nbsp;&nbsp; CODE4 cb ;</p>

<p class=SourceCode>&nbsp;&nbsp; DATA4 *master ;</p>

<p class=SourceCode>&nbsp;&nbsp; DATA4 *sl1 ;</p>

<p class=SourceCode>&nbsp;&nbsp; DATA4 *sl2 ;</p>

<p class=SourceCode>&nbsp;&nbsp; DATA4 *sl3 ;</p>

<p class=SourceCode>&nbsp;&nbsp; DATA4 *sl4 ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; RELATE4 *MasterRelation ;</p>

<p class=SourceCode>&nbsp;&nbsp; RELATE4 *relate1, *relate2, *relate3, 
 *relate4 ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; code4init( &amp;cb ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; master = d4open( &amp;cb, &quot;M1&quot; 
 ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; sl1 = d4open( &amp;cb, &quot;SL1&quot; 
 ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; sl2 = d4open( &amp;cb, &quot;SL2&quot; 
 ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; sl3 = d4open( &amp;cb, &quot;SL3&quot; 
 ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; sl4 = d4open( &amp;cb, &quot;SL4&quot; 
 ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; /* create the tree*/</p>

<p class=SourceCode>&nbsp;&nbsp; MasterRelation = relate4init( master ) 
 ;</p>

<p class=SourceCode>&nbsp;&nbsp; relate1 = relate4createSlave( MasterRelation, 
 sl1, &quot;TOSL1&quot;, </p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 d4tag( sl1, &quot;FRM&quot; ) ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; relate2 = relate4createSlave( MasterRelation, 
 sl2, &quot;TOSL2&quot;,</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 d4tag( sl2, &quot;FRM&quot;) ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; relate3 = relate4createSlave( relate2, 
 sl3, &quot;TOSL3&quot;, </p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 d4tag( sl3, &quot;FRMSL2&quot; ) ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; relate4 = relate4createSlave( MasterRelation, 
 sl4, &quot;TOSL4&quot;, </p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 d4tag( sl4, &quot;FRM&quot; ) ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; error4exitTest( &amp;cb ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; relate4top( MasterRelation ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; displayRelationTree( MasterRelation ) 
 ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; relate4free( MasterRelation, 1 ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; code4initUndo( &amp;cb ) ;</p>

<p class=SourceCode>}</p>

</body>

</html>
