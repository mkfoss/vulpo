<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<html>

<!--(==============================================================)-->
<!--(Document created with RoboEditor. )============================-->
<!--(==============================================================)-->

<head>

<title>d4seekNext</title>

<!--(Meta)==========================================================-->

<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Originator content=ImportDoc>
<meta name=OriginalFile content="C:\Documentation\C Reference Guide Word Docs\data4.doc">
<meta name=generator content="RoboHELP by eHelp Corporation - www.ehelp.com">
<meta name=generator-major-version content=0.1>
<meta name=generator-minor-version content=1>
<meta name=filetype content=kadov>
<meta name=filetype-version content=1>
<meta name=page-count content=1>
<meta name=layout-height content=1180>
<meta name=layout-width content=741>


<!--(Links)=========================================================-->

<link rel="stylesheet" href="data4.css">



</head>

<!--(Body)==========================================================-->


<body lang=EN-US>

<h2>d4seekNext</h2>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Usage:&nbsp;&nbsp;&nbsp; 
 </span></span>int d4seekNext( DATA4 *data, const char *ptr )</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span 
 class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Description:&nbsp;&nbsp;&nbsp; 
 </span></span><span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">d4seekNext</span></span> 
 differs from <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">d4seek</span></span> 
 in that the seek begins from the current position within the tag, instead 
 of from the beginning of the tag. This provides the capability of performing 
 an incremental search through the database.</p>

<p class=Body
	style="text-indent: 0px;">If the index key at the current position 
 in the tag is not equal to that of the search key, <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">d4seekNext</span></span> 
 calls <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">d4seek</span></span> 
 to find the first occurrence of the search key in the tag. If the seek 
 fails to find a match, <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">r4after</span></span> 
 is returned.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=InlineFunctionDescTitle><span 
 style="font-size: 9.0pt; font-family: Arial;">Parameters:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">ptr&nbsp;&nbsp;&nbsp; 
 </span></span><i>ptr</i> points to the value for which the search is conducted. 
 See<span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;"> 
 d4seek</span></span> for more details.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Returns:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4success&nbsp;&nbsp;&nbsp; 
 </span></span>Success. The key was found and the record was positioned.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4after&nbsp;&nbsp;&nbsp; 
 </span></span>This value is returned when there is no index key in the 
 tag that matches the search value. The data file is positioned to the 
 record after. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4eof&nbsp;&nbsp;&nbsp; 
 </span></span>The search value was not found and the search value was 
 greater than the last key of the tag. Consequently, <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">d4goEof</span></span> was 
 called to turn the EOF condition on. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4entry&nbsp;&nbsp;&nbsp; 
 </span></span><span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">CODE4.errGo</span></span> 
 is false (zero) and the data file record did not exist. This value is 
 also returned when the seek fails to find the next occurrence of the search 
 key. The data file is positioned to the record after.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4locked&nbsp;&nbsp;&nbsp; 
 </span></span>A required lock attempt did not succeed. The lock was required 
 either for flushing changes to disk or to lock the found record as required 
 when <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">CODE4.readLock</span></span> 
 is true (non-zero). </p>

<p class=Body><span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 r4unique&nbsp;&nbsp;&nbsp; </span></span>This value is returned when a 
 record flush causes a duplicate key in a unique tag, and <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">t4unique </span></span>returned 
 <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">r4unique 
 </span></span>for the tag.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4noTag&nbsp;&nbsp;&nbsp; 
 </span></span>The seek could not be accomplished because no tag exists 
 for the data file. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">&lt; 
 0&nbsp;&nbsp;&nbsp; </span></span>Error. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Locking:&nbsp;&nbsp;&nbsp; 
 </span></span>If record buffer flushing is required, the record and index 
 files are locked to accomplish this task. If <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">CODE4.readLock</span></span> 
 is true (non-zero), the new record is locked before it is read. See <span 
 class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">d4flush</span></span> 
 and <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">code4unlockAuto</span></span> 
 for details on how any necessary locking and unlocking is accomplished.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle
		style="font-size: 9.0pt; font-family: Arial;">See Also:</span>&nbsp;&nbsp; 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="d4seek.htm">d4seek</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="d4tagSelect.htm">d4tagSelect</a></span></p>

<p class=SourceCode>/* ex65.c */</p>

<p class=SourceCode>#include &quot;d4all.h&quot;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>#ifdef __TURBOC__</p>

<p class=SourceCode>&nbsp;&nbsp; extern unsigned _stklen = 10000;</p>

<p class=SourceCode>#endif</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>int SeekSeries( DATA4 *d, const char *s )</p>

<p class=SourceCode>{</p>

<p class=SourceCode>&nbsp;&nbsp; int rc ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; rc = d4seekNext( d, s ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; if( rc == r4noTag || rc == r4entry || 
 rc == r4locked || rc &lt; 0 )</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return rc ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; if( rc == r4after || rc == r4eof )</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rc = d4seek( d, 
 s ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; printf( &quot; the found record %s \n&quot;, 
 d4record( d ) ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; return rc ;</p>

<p class=SourceCode>}</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>void main()</p>

<p class=SourceCode>{</p>

<p class=SourceCode>&nbsp;&nbsp; CODE4 cb ;</p>

<p class=SourceCode>&nbsp;&nbsp; DATA4 *data ;</p>

<p class=SourceCode>&nbsp;&nbsp; TAG4 *nameTag ;</p>

<p class=SourceCode>&nbsp;&nbsp; int rc ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; code4init( &amp;cb ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; data = d4open( &amp;cb, &quot;PEOPLE&quot; 
 ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; nameTag = d4tag( data, &quot;PPL_NAME&quot;) 
 ;</p>

<p class=SourceCode>&nbsp;&nbsp; d4tagSelect( data, nameTag ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; d4seek( data, &quot;mickey&quot; ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; rc = SeekSeries( data, &quot;mickey&quot; 
 ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; code4initUndo( &amp;cb ) ;</p>

<p class=SourceCode>}</p>

</body>

</html>
