<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<html>

<!--(==============================================================)-->
<!--(Document created with RoboEditor. )============================-->
<!--(==============================================================)-->

<head>

<title>d4seek</title>

<!--(Meta)==========================================================-->

<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Originator content=ImportDoc>
<meta name=OriginalFile content="C:\Documentation\C Reference Guide Word Docs\data4.doc">
<meta name=generator content="RoboHELP by eHelp Corporation - www.ehelp.com">
<meta name=generator-major-version content=0.1>
<meta name=generator-minor-version content=1>
<meta name=filetype content=kadov>
<meta name=filetype-version content=1>
<meta name=page-count content=1>
<meta name=layout-height content=1687>
<meta name=layout-width content=741>


<!--(Links)=========================================================-->

<link rel="stylesheet" href="data4.css">



</head>

<!--(Body)==========================================================-->


<body lang=EN-US>

<h2>d4seek</h2>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Usage:&nbsp;&nbsp;&nbsp; 
 </span></span>int d4seek( DATA4 *data, const char *ptr )</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span 
 class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Description:&nbsp;&nbsp;&nbsp; 
 </span></span><span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">d4seek</span></span> 
 searches for a record using the selected tag. If a tag has not been selected 
 (See <b><span style="font-size: 10.0pt; font-family: Arial;">d4tagSelect</span></b>), 
 the first tag of the first opened index is used. Once the search value 
 is located in the tag, the corresponding data file record is read into 
 the record buffer. Searching always begins from the first logical record 
 in the database as determined by the selected tag.</p>

<p class=Body
	style="text-indent: 0px;">To seek for a Unicode string or binary data, 
 call <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">d4seekN</span></span>. 
 </p>

<p class=Body
	style="text-indent: 0px;"><span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">d4seek</span></span> 
 may be used with any tag type, as long as it is formatted correctly. Seeking 
 on memo fields is not allowed. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=InlineFunctionDescTitle><span 
 style="font-size: 9.0pt; font-family: Arial;">Parameters:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">ptr&nbsp;&nbsp;&nbsp; 
 </span></span><i>ptr </i>points to a character array containing the value 
 for which the search is conducted.</p>

<p class=Body
	style="text-indent: 0px;">If the tag is of type Date, <i>ptr</i> should 
 point to a string in the format &quot;CCYYMMDD&quot; (Century, Year, Month, 
 Day).</p>

<p class=Body
	style="text-indent: 0px;">If the tag is of type Character, <i>ptr </i>may 
 point to fewer characters than the tag key length. In this case, a search 
 is done for the first key which matches the supplied characters. If <i>ptr 
 </i>points to data longer than the tag key length, the extra characters 
 are ignored. </p>

<p class=Body
	style="text-indent: 0px;">If the tag is of type Currency, Float Double, 
 Integer or Numeric, <i>ptr</i> should point to a string formatted as a 
 number. e.g. &quot;33.7&quot;</p>

<p class=Body
	style="text-indent: 0px;">If the tag is of type DateTime, <i>ptr</i> 
 must point to a string in the format &quot;CCYYMMDDhh:mm:ss:ttt&quot; 
 where CCYY is the year, MM is the month, DD is the day, hh is the hour, 
 mm is the minute, ss is the second, and ttt is thousandths of the second.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Returns:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4success&nbsp;&nbsp;&nbsp; 
 </span></span>Success. The key was found and the record was positioned.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4after&nbsp;&nbsp;&nbsp; 
 </span></span>The search value was not found. The data file is positioned 
 to the record after the position where the search key would have been 
 located if it had existed. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4eof&nbsp;&nbsp;&nbsp; 
 </span></span>The search value was not found and the search value was 
 greater than the last key of the tag. Consequently, <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">d4goEof</span></span> was 
 called to turn the EOF condition on. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4entry&nbsp;&nbsp;&nbsp; 
 </span></span><span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">CODE4.errGo</span></span> 
 is false (zero) and the data file record did not exist. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4locked&nbsp;&nbsp;&nbsp; 
 </span></span>A required lock attempt did not succeed. The lock was required 
 either for flushing changes to disk or to lock the found record as required 
 when <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">CODE4.readLock</span></span> 
 is true (non-zero). </p>

<p class=Body><span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 r4unique&nbsp;&nbsp;&nbsp; </span></span>This value is returned when a 
 record flush causes a duplicate key in a unique tag, and <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">t4unique </span></span>returned 
 <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">r4unique 
 </span></span>for the tag.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4noTag&nbsp;&nbsp;&nbsp; 
 </span></span>The seek could not be accomplished because no tag exists 
 for the data file. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">&lt; 
 0&nbsp;&nbsp;&nbsp; </span></span>Error. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Locking:&nbsp;&nbsp;&nbsp; 
 </span></span>If record buffer flushing is required, the record and index 
 files are locked to accomplish this task. If <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">CODE4.readLock</span></span> 
 is true (non-zero), the new record is locked before it is read. See <span 
 class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">d4flush</span></span> 
 and <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">code4unlockAuto</span></span> 
 for details on how any necessary locking and unlocking is accomplished.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle
		style="font-size: 9.0pt; font-family: Arial;">See Also:</span>&nbsp;&nbsp; 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="d4tagSelect.htm">d4tagSelect</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="d4seekDouble.htm">d4seekDouble</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="d4seekN.htm">d4seekN</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="d4seekNext.htm">d4seekNext</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="d4seekNextDouble.htm">d4seekNextDouble</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="d4seekNextN.htm">d4seekNextN</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="../Code4/CODE4_Structure_Variables/CODE4.readLock.htm">CODE4.readLock</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="../Code4/CodeBase_Function_Reference/code4unlockAuto.htm">code4unlockAuto</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="d4flush.htm">d4flush</a></span></p>

<p class=SourceCode>/* ex64.c */</p>

<p class=SourceCode>#include &quot;d4all.h&quot;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>#ifdef __TURBOC__</p>

<p class=SourceCode>&nbsp;&nbsp; extern unsigned _stklen = 10000;</p>

<p class=SourceCode>#endif</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>void main( void )</p>

<p class=SourceCode>{</p>

<p class=SourceCode>&nbsp;&nbsp; CODE4 cb ;</p>

<p class=SourceCode>&nbsp;&nbsp; DATA4 *people ;</p>

<p class=SourceCode>&nbsp;&nbsp; FIELD4 *age, *birth ;</p>

<p class=SourceCode>&nbsp;&nbsp; int rc ;</p>

<p class=SourceCode>&nbsp;&nbsp; char result[12] ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; code4init( &amp;cb ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; people = d4open( &amp;cb, &quot;people.dbf&quot; 
 ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; /* Assume 'PEOPLE.DBF' has a production 
 index file with tags</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PPL_NAME, PPL_AGE, 
 PPL_BRTH */</p>

<p class=SourceCode>&nbsp;&nbsp; d4tagSelect( people, d4tag( people, &quot;PPL_NAME&quot; 
 ) ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; if( d4seek( people,&nbsp; &quot;fred&quot; 
 ) == r4success )</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;printf(&quot;fred 
 is in record # %d\n&quot;,d4recNo( people )) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; if( d4seek( people, &quot;HANK STEVENS&quot; 
 ) == r4success )</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;printf( 
 &quot;HANK STEVENS is in record # %d\n&quot;,d4recNo( people )) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; d4tagSelect( people, d4tag( people, &quot;PPL_AGE&quot; 
 ) ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; age = d4field( people, &quot;AGE&quot; 
 ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; rc = d4seekDouble( people, 0.0 ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; if( rc == r4success || rc == r4after )</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;printf( 
 &quot;The youngest age is: %d\n&quot;, f4int( age )) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; /* Seek using the char * version */</p>

<p class=SourceCode>&nbsp;&nbsp; rc = d4seek( people, &quot;0&quot; ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; if( rc == r4success || rc == r4after )</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;printf( 
 &quot;The youngest age is: %d\n&quot;, f4int( age )) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; /* Assume PPL_BRTH is a Date key expression 
 */</p>

<p class=SourceCode>&nbsp;&nbsp; d4tagSelect( people, d4tag( people, &quot;PPL_BRTH&quot; 
 )) ;</p>

<p class=SourceCode>&nbsp;&nbsp; birth = d4field( people, &quot;BIRTH&quot; 
 ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; date4format( &quot;19600415&quot;, result, 
 &quot;MMM DD, CCYY&quot; );</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; if( d4seek( people, &quot;19600415&quot;) 
 == r4success)</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 /* Char. array in CCYYMMDD format*/</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf( &quot;Found: 
 %s\n&quot;, result ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; if( d4seekDouble( people, date4long( &quot;19600415&quot; 
 )) == r4success )</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf( &quot;Found: 
 %s\n&quot;, result ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; d4close( people ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; code4initUndo( &amp;cb ) ;</p>

<p class=SourceCode>}</p>

</body>

</html>
