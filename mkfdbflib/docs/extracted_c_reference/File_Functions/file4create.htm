<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<html>

<!--(==============================================================)-->
<!--(Document created with RoboEditor. )============================-->
<!--(==============================================================)-->

<head>

<title>file4create</title>

<!--(Meta)==========================================================-->

<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Originator content=ImportDoc>
<meta name=OriginalFile content="C:\Documentation\C Reference Guide Word Docs\file4.doc">
<meta name=generator content="RoboHELP by eHelp Corporation - www.ehelp.com">
<meta name=generator-major-version content=0.1>
<meta name=generator-minor-version content=1>
<meta name=filetype content=kadov>
<meta name=filetype-version content=1>
<meta name=page-count content=1>
<meta name=layout-height content=863>
<meta name=layout-width content=741>


<!--(Links)=========================================================-->

<link rel="stylesheet" href="file4.css">



</head>

<!--(Body)==========================================================-->


<body lang=EN-US>

<div style="border: none;
			border-bottom: solid #000000 2.25pt;
			padding: 0in 0in 1.0pt 0in;">
<h2>file4create</h2>
</div>

<p class=Body
	style="margin-top: 0in;
			margin-right: 0in;
			margin-bottom: .0001pt;
			margin-left: 175.5pt;
			text-indent: -175.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Usage:&nbsp;&nbsp;&nbsp; 
 </span></span>int file4create( FILE4 *file, CODE4 *code, const&nbsp;char&nbsp;*name, 
 int&nbsp;doAlloc&nbsp;)</p>

<p class=Body
	style="margin-top: 6.0pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Description:&nbsp;&nbsp;&nbsp; 
 </span></span>A new file is created and opened. If <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">CODE4.createTemp </span></span>is 
 true (non-zero), <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">file4create 
 </span></span>creates a file that is automatically deleted from disk when 
 it is closed.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=InlineFunctionDescTitle><span 
 style="font-size: 9.0pt; font-family: Arial;">Parameters:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">code&nbsp;&nbsp;&nbsp; 
 </span></span>This <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">CODE4</span></span> 
 reference is used for memory allocation for the file, optimization, and 
 error messages.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">name&nbsp;&nbsp;&nbsp; 
 </span></span>This null terminated string contains the name of the file 
 to be created. If <i>name </i>does not contain a drive and/or directory, 
 the current drive and directory are used. </p>

<p class=Body
	style="text-indent: 0px;">If <i>name</i> is not provided, CodeBase 
 creates a temporary file in the system's temporary directory with a unique 
 name. This file name may be retrieved using <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">file4name</span></span>. 
 CodeBase automatically allocates memory for this file name as the file 
 is created, and frees it when the file is closed.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">doAlloc&nbsp;&nbsp;&nbsp; 
 </span></span>The <i>doAlloc </i>flag determines whether memory should 
 be allocated to store a copy of <i>name</i>, or whether simply the pointer 
 <i>name</i> should be stored. If <i>doAlloc</i> is false (zero), only 
 the pointer is stored. If <i>name </i>points to temporary memory, set 
 <i>doAlloc</i> to true (non-zero). </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Returns:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4success&nbsp;&nbsp;&nbsp; 
 </span></span>Success. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4noCreate&nbsp;&nbsp;&nbsp; 
 </span></span>The new file could not be created. This is usually due to 
 attempting to create a file over an existing file of the same name with 
 the <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">CODE4.safety</span></span> 
 flag set to true (non-zero). This only occurs if <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">CODE4.errCreate</span></span> 
 is false (zero).</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">&lt; 
 0&nbsp;&nbsp;&nbsp; </span></span>Error.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle
		style="font-size: 9.0pt; font-family: Arial;">See Also:</span>&nbsp;&nbsp; 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="file4name.htm">file4name</a></span><span 
 class=InlineFunctionNames
	style="font-size: 12.0pt; font-weight: normal;">,</span><span class=InlineFunctionNames
	style="font-size: 10.0pt; font-family: Arial;"> <a href="file4close.htm">file4close</a></span></p>

<p class=SourceCode>/*ex105.c*/</p>

<p class=SourceCode>#include &quot;d4all.h&quot; </p>

<p class=SourceCode>extern unsigned _stklen = 10000 ; /* for all Borland 
 compilers*/ </p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>void main( void ) </p>

<p class=SourceCode>{</p>

<p class=SourceCode>&nbsp;&nbsp; CODE4 cb ;</p>

<p class=SourceCode>&nbsp;&nbsp; FILE4 textFile ;</p>

<p class=SourceCode>&nbsp;&nbsp; int rc ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; code4init( &amp;cb ) ; </p>

<p class=SourceCode>&nbsp;&nbsp; cb.accessMode = OPEN4DENY_RW ;</p>

<p class=SourceCode>&nbsp;&nbsp; cb.errCreate = 0 ; /* Handle the errors 
 at the application level*/</p>

<p class=SourceCode>&nbsp;&nbsp; rc = file4create( &amp;textFile, &amp;cb, 
 &quot;C:\\TEMP\\TEXT.FIL&quot;, 0 ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; if( rc &lt; 0 || rc == r4noCreate)</p>

<p class=SourceCode>&nbsp;&nbsp; {</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf( &quot;File 
 'TEXT.FIL' NOT created\n&quot;) ;</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; code4exit( &amp;cb 
 ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; }</p>

<p class=SourceCode>&nbsp;&nbsp; file4write( &amp;textFile, 0, &quot;Some 
 Sample Text&quot;, 16 ) ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; file4close( &amp;textFile ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; code4initUndo( &amp;cb ) ; /* flush changes 
 and close file. */</p>

<p class=SourceCode>}</p>

</body>

</html>
