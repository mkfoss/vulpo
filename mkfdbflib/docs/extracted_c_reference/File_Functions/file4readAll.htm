<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<html>

<!--(==============================================================)-->
<!--(Document created with RoboEditor. )============================-->
<!--(==============================================================)-->

<head>

<title>file4readAll</title>

<!--(Meta)==========================================================-->

<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Originator content=ImportDoc>
<meta name=OriginalFile content="C:\Documentation\C Reference Guide Word Docs\file4.doc">
<meta name=generator content="RoboHELP by eHelp Corporation - www.ehelp.com">
<meta name=generator-major-version content=0.1>
<meta name=generator-minor-version content=1>
<meta name=filetype content=kadov>
<meta name=filetype-version content=1>
<meta name=page-count content=1>
<meta name=layout-height content=902>
<meta name=layout-width content=741>


<!--(Links)=========================================================-->

<link rel="stylesheet" href="file4.css">



</head>

<!--(Body)==========================================================-->


<body lang=EN-US>

<div style="border: none;
			border-bottom: solid #000000 2.25pt;
			padding: 0in 0in 1.0pt 0in;">
<h2>file4readAll</h2>
</div>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Usage:&nbsp;&nbsp;&nbsp; 
 </span></span>unsigned file4readAll(FILE4 *file, long pos, void *ptr, 
 unsigned len)&nbsp;</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span 
 class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Description:&nbsp;&nbsp;&nbsp; 
 </span></span>Information is read from the file, starting at byte <i>pos</i>, 
 and stored in <i>ptr</i>. An attempt is made to read <i>len </i>bytes 
 into <i>ptr</i>.</p>

<p class=Body
	style="text-indent: 0px;">If the end of the file is reached before 
 the requested number of bytes are read, an error message is generated, 
 and a negative value is returned.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=InlineFunctionDescTitle><span 
 style="font-size: 9.0pt; font-family: Arial;">Parameters:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">pos&nbsp;&nbsp;&nbsp; 
 </span></span>A byte offset within the file. For example, 0L represents 
 the first byte in the file. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">ptr&nbsp;&nbsp;&nbsp; 
 </span></span>Points to where the file information is to be stored. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">len&nbsp;&nbsp;&nbsp; 
 </span></span>The number of bytes to read from the file. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Returns:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4success&nbsp;&nbsp;&nbsp; 
 </span></span>Success. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">&lt; 
 0&nbsp;&nbsp;&nbsp; </span></span>Error. Check the <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">CODE4.errorCode</span></span> 
 setting for the specific error. </p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle
		style="font-size: 9.0pt; font-family: Arial;">See Also:</span>&nbsp;&nbsp; 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="file4read.htm">file4read</a></span></p>

<p class=SourceCode>/*ex111.c*/</p>

<p class=SourceCode>#include &quot;d4all.h&quot; </p>

<p class=SourceCode>typedef struct </p>

<p class=SourceCode>{</p>

<p class=SourceCode>&nbsp;&nbsp; int id ;</p>

<p class=SourceCode>&nbsp;&nbsp; char password[9] ;</p>

<p class=SourceCode>} MY_STRUCT ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>int readUserInfo( FILE4 *file, MY_STRUCT *ms, int user) 
 </p>

<p class=SourceCode>{</p>

<p class=SourceCode>&nbsp;&nbsp; int rc ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; rc = file4readAll( file, user*sizeof(MY_STRUCT), 
 ms, sizeof(MY_STRUCT) ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; if( rc != 0 )</p>

<p class=SourceCode>&nbsp;&nbsp; {</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf( &quot;Could 
 not read user # %d\n&quot;, user ) ;</p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return rc ;</p>

<p class=SourceCode>&nbsp;&nbsp; }</p>

<p class=SourceCode>&nbsp;&nbsp; printf( &quot;id: %d password: %s\n&quot;, 
 ms-&gt;id, ms-&gt;password ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; return 0 ;</p>

<p class=SourceCode>}</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>void main()</p>

<p class=SourceCode>{</p>

<p class=SourceCode>&nbsp;&nbsp; CODE4 cb ;</p>

<p class=SourceCode>&nbsp;&nbsp; FILE4 testFile ;</p>

<p class=SourceCode>&nbsp;&nbsp; MY_STRUCT *info ;</p>

<p class=SourceCode>&nbsp;&nbsp; int userNum ;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;&nbsp; code4init( &amp;cb );</p>

<p class=SourceCode>&nbsp;&nbsp; file4open( &amp;testFile, &amp;cb, &quot;TEST.FIL&quot;, 
 0 ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; info = ( MY_STRUCT * )malloc( sizeof( 
 MY_STRUCT ) ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; for (userNum = 0; userNum &lt;= 9 ; userNum++ 
 ) </p>

<p class=SourceCode>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; readUserInfo( 
 &amp;testFile, info, userNum ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; file4close( &amp;testFile ) ;</p>

<p class=SourceCode>&nbsp;&nbsp; code4initUndo( &amp;cb ) ;</p>

<p class=SourceCode>}</p>

</body>

</html>
