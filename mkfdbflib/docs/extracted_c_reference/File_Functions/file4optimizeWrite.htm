<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<html>

<!--(==============================================================)-->
<!--(Document created with RoboEditor. )============================-->
<!--(==============================================================)-->

<head>

<title>file4optimizeWrite</title>

<!--(Meta)==========================================================-->

<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Originator content=ImportDoc>
<meta name=OriginalFile content="C:\Documentation\C Reference Guide Word Docs\file4.doc">
<meta name=generator content="RoboHELP by eHelp Corporation - www.ehelp.com">
<meta name=generator-major-version content=0.1>
<meta name=generator-minor-version content=1>
<meta name=filetype content=kadov>
<meta name=filetype-version content=1>
<meta name=page-count content=1>
<meta name=layout-height content=800>
<meta name=layout-width content=741>


<!--(Links)=========================================================-->

<link rel="stylesheet" href="file4.css">



</head>

<!--(Body)==========================================================-->


<body lang=EN-US>

<div style="border: none;
			border-bottom: solid #000000 2.25pt;
			padding: 0in 0in 1.0pt 0in;">
<h2>file4optimizeWrite</h2>
</div>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Usage:&nbsp;&nbsp;&nbsp; 
 </span></span>int file4optimizeWrite( FILE4 *file, int optFlag )</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span 
 class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Description:&nbsp;&nbsp;&nbsp; 
 </span></span>The default write optimizations for the file are replaced 
 with the specified settings. This function is identical to<span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;"> d4optimizeWrite</span></span><b> 
 </b>except that it only applies to the specific file specified by parameter 
 <i>file</i>. <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">CODE4.optimizeWrite</span></span> 
 setting is used as the default for write optimization.</p>

<p class=Body
	style="text-indent: 0px;">This function does nothing if the library 
 was built with the <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">S4OFF_OPTIMIZE</span></span>&nbsp;switch 
 defined.</p>

<!--(Table)=========================================================-->
<table x-use-null-cells
		style="margin-left: 5.4pt;
				border-collapse: collapse;
				border-spacing: 0px;
				border-spacing: 0px;"
		cellspacing=0>

<tr>
<td style="x-cell-content-align: top;
			width: 85.5pt;
			padding: 0in 5.4pt 0in 5.4pt;
			padding-left: 0px;
			padding-top: 0px;
			padding-right: 0px;
			padding-bottom: 0px;"
	valign=top
	width=85.5pt>
<p class=Body
	style="margin: 0in;
			margin-bottom: .0001pt;
			text-indent: 0in;"><img src="../Images/Note.gif" v:shapes="_x0000_i1030" x-maintain-ratio="TRUE" style="width: 47px;
											height: 40px;
											float: none;
											border-style: none;" width="47" height="40" border="0">&nbsp;<b><sup><span style="font-size: 16.0pt; font-family: Arial;">Note</span></sup></b></td>
<td style="x-cell-content-align: top;
			width: 310.5pt;
			border: solid #000000 .75pt;
			padding: 0in 5.4pt 0in 5.4pt;
			padding-left: 0px;
			padding-top: 0px;
			padding-right: 0px;
			padding-bottom: 0px;
			background-color: #e5e5e5;"
	bgcolor=#E5E5E5
	valign=top
	width=310.5pt>
<p class=NoteText>If optimization has been enabled for a file, it is still 
 necessary to call <span class=InlineFunctionNames><span style="font-size: 10.0pt;">code4optStart</span></span> 
 before optimization actually takes place. </td></tr>
</table>

<p class=Body
	style="margin-bottom: .0001pt;">&nbsp;</p>

<!--(Table)=========================================================-->
<table x-use-null-cells
		style="margin-left: 5.4pt;
				border-collapse: collapse;
				border-spacing: 0px;
				border-spacing: 0px;"
		cellspacing=0>

<tr>
<td style="x-cell-content-align: top;
			width: 85.5pt;
			padding: 0in 5.4pt 0in 5.4pt;
			padding-left: 0px;
			padding-top: 0px;
			padding-right: 0px;
			padding-bottom: 0px;"
	valign=top
	width=85.5pt>
<p class=Body
	style="margin-left: 0in; text-indent: 0in;"><img src="../Images/Note.gif" v:shapes="_x0000_i1031" x-maintain-ratio="TRUE" style="width: 47px;
															height: 40px;
															float: none;
															border-style: none;" width="47" height="40" border="0">&nbsp;<b><sup><span 
 style="font-size: 16.0pt; font-family: Arial;">Note</span></sup></b></td>
<td style="x-cell-content-align: top;
			width: 310.5pt;
			border: solid #000000 .75pt;
			padding: 0in 5.4pt 0in 5.4pt;
			padding-left: 0px;
			padding-top: 0px;
			padding-right: 0px;
			padding-bottom: 0px;
			background-color: #e5e5e5;"
	bgcolor=#E5E5E5
	valign=top
	width=310.5pt>
<p class=NoteText>In general, it is not recommended that shared files be 
 write-optimized unless the file is completely locked. It is the caller's 
 responsibility to ensure that any writes to the file are flushed prior 
 to unlocking. </td></tr>
</table>

<p class=Body
	style="margin-top: 6.0pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Parameters:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">optFlag&nbsp;&nbsp;&nbsp; 
 </span></span>This flag determines how memory optimizations should be 
 handled for the file. Valid values for <i>optFlag</i> are:</p>

<p class=BodyIndent><span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 OPT4EXCLUSIVE</span></span>&nbsp;&nbsp; Write-optimize when files are 
 opened exclusively or when the <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">S4OFF_MULTI</span></span>&nbsp;compilation 
 switch is defined. Otherwise, do not write optimize. If <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">file4optimizeWrite</span></span> 
 is not called, the <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">CODE4.optimizeWrite</span></span> 
 member variable is used as the default. </p>

<p class=BodyIndent
	style="text-indent: 0px;">If a file is not opened exclusively or <span 
 class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">S4OFF_MULTI</span></span>&nbsp;is 
 not defined, this option disables write optimizations, and any buffered 
 writes are flushed to disk with a call to <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">file4flush</span></span>. 
 </p>

<p class=BodyIndent><span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 OPT4OFF</span></span>&nbsp;&nbsp; Do not write optimize. If write optimizations 
 are disabled after having been enabled, buffered writes are flushed to 
 disk using <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">file4flush</span></span>. 
 </p>

<p class=BodyIndent><span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 OPT4ALL</span></span>&nbsp;&nbsp; This is the same as the <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">OPT4EXCLUSIVE</span></span> 
 option except shared files are also write optimized. Use this option with 
 care. If concurrently running applications do not lock, they may be presented 
 with inconsistent data. In addition, write optimizations does not improve 
 performance unless several write operations take place.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Returns:</span></span></p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">r4success&nbsp;&nbsp;&nbsp; 
 </span></span>Success.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineCommentText><span style="font-size: 9.0pt; font-family: Arial;">&lt; 
 0&nbsp;&nbsp;&nbsp; </span></span>Error. <span class=InlineFunctionNames><span 
 style="font-size: 10.0pt; font-family: Arial;">file4flush</span></span> 
 returned an error.</p>

<p class=Body>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle><span style="font-size: 9.0pt; font-family: Arial;">Locking:&nbsp;&nbsp;&nbsp; 
 </span></span><span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">file4optimizeWrite</span></span> 
 does no locking. However, if optimizations are disabled after having been 
 enabled, a call to <span class=InlineFunctionNames><span style="font-size: 10.0pt; font-family: Arial;">file4flush</span></span> 
 is made internally. To maintain data integrity when disabling optimizations, 
 it is necessary for the programmer to lock the file.</p>

<p class=Body
	style="margin-bottom: .0001pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 <span class=InlineFunctionDescTitle
		style="font-size: 9.0pt; font-family: Arial;">See Also:</span>&nbsp;&nbsp; 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="../Data_File_Functions/d4optimize.htm">d4optimize</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="file4flush.htm">file4flush</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="../Code4/CODE4_Structure_Variables/CODE4.optimize.htm">CODE4.optimize</a></span>, 
 <span class=InlineFunctionNames
		style="font-size: 10.0pt; font-family: Arial;"><a href="../Code4/CODE4_Structure_Variables/CODE4.optimizeWrite.htm">CODE4.optimizeWrite</a></span></p>

</body>

</html>
